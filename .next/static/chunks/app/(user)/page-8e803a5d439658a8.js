(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[282],{9301:function(e,t,i){Promise.resolve().then(i.t.bind(i,78139,23)),Promise.resolve().then(i.bind(i,97678)),Promise.resolve().then(i.bind(i,42874)),Promise.resolve().then(i.bind(i,2512))},2512:function(e,t,i){"use strict";i.r(t);var n=i(57437),s=i(39227),o=i(43226),r=i(61396),l=i.n(r),a=i(46986),d=i(49605),c=i(67722),u=i(82749),h=i(2265),x=i(81835);t.default=()=>{let{data:e}=(0,u.useSession)(),[t,i]=(0,h.useState)([]);return(0,h.useEffect)(()=>{let t=async()=>{var t;if(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t._id)try{let t=await (0,x.w)({url:"".concat("http://160.25.81.159:8000/api/v1","/historys/user/").concat(e.user._id),method:"GET"});(null==t?void 0:t.data)&&i(null==t?void 0:t.data)}catch(e){console.error("Lỗi lấy lịch sử:",e)}};t()},[e]),(0,n.jsxs)(s.Z,{sx:{mt:3},children:[(0,n.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,n.jsx)(o.Z,{variant:"h6",fontWeight:600,children:"Lịch sử"}),(0,n.jsx)(l(),{href:"#",style:{textDecoration:"unset",color:"unset"},children:"Tất cả"})]}),null==t?void 0:t.map(e=>{var t,i,o,r,u,h,x;return(0,n.jsxs)(s.Z,{sx:{display:"flex",mb:2,alignItems:"center"},children:[(0,n.jsx)(s.Z,{sx:{position:"relative",mr:2},children:(0,n.jsx)(l(),{href:"/track/".concat(null==e?void 0:e.songID[0]._id,"?audio=").concat(null==e?void 0:e.songID[0].audio,"&id=").concat(null==e?void 0:e.songID[0]._id),children:(0,n.jsx)("img",{src:"".concat("http://160.25.81.159:8000","/image/song/").concat(null==e?void 0:null===(t=e.songID[0])||void 0===t?void 0:t.cover),alt:"",width:50,height:50,style:{borderRadius:4}})})}),(0,n.jsxs)(s.Z,{sx:{flexGrow:1,a:{textDecoration:"unset",color:"unset"}},children:[(0,n.jsx)(l(),{href:"/track/".concat(null==e?void 0:e.songID[0]._id,"?audio=").concat(null==e?void 0:e.songID[0].audio,"&id=").concat(null==e?void 0:e.songID[0]._id),children:null==e?void 0:e.songID[0].name}),(0,n.jsx)(s.Z,{sx:{fontSize:12},children:null==e?void 0:null===(i=e.songID[0])||void 0===i?void 0:i.users.map(e=>(0,n.jsxs)(l(),{href:"/detail/".concat(e._id),children:[e.name," "]}))}),(0,n.jsxs)(s.Z,{sx:{display:"flex",gap:1,mt:.5,alignItems:"center",fontSize:"12px",color:"#888"},children:[(0,n.jsx)(a.default,{fontSize:"inherit"})," ",(null==e?void 0:null===(r=e.songID[0])||void 0===r?void 0:null===(o=r.like)||void 0===o?void 0:o.length)||0,(0,n.jsx)(c.default,{fontSize:"small"})," ",(null==e?void 0:null===(h=e.songID[0])||void 0===h?void 0:null===(u=h.dislike)||void 0===u?void 0:u.length)||0,(0,n.jsx)(d.default,{fontSize:"inherit"})," ",(null==e?void 0:null===(x=e.songID[0].totalListen)||void 0===x?void 0:x.length)||0]})]})]},e._id)})]})}},24197:function(e,t,i){"use strict";i.d(t,{F:function(){return l}});var n=i(57437),s=i(53975),o=i(49804),r=i(2265);let l=e=>{let{message:t,onExited:i,autoHideDuration:l,...a}=e,[d,c]=r.useState(!0);return(0,n.jsx)(s.Z,{open:d,onClose:(e,t)=>{"clickaway"!==t&&c(!1)},TransitionProps:{onExited:i},anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:null!=l?l:3e3,...a,children:(0,n.jsx)(o.Z,{severity:t.severity,children:t.message})},t.key)}},27392:function(e,t,i){"use strict";i.d(t,{pm:function(){return n.useToast}}),i(24197);var n=i(73534)},73534:function(e,t,i){"use strict";i.r(t),i.d(t,{ToastContext:function(){return r},ToastProvider:function(){return l},useToast:function(){return a}});var n=i(57437),s=i(2265),o=i(24197);let r=(0,s.createContext)(null),l=e=>{let{children:t,...i}=e,[l,a]=(0,s.useState)([]),d=e=>a(t=>t.filter(t=>t.key!==e));return(0,n.jsxs)(r.Provider,{value:{addMessage(e){a(t=>[...t,e])}},children:[t,l.map(e=>(0,n.jsx)(o.F,{message:e,onExited:()=>d(e.key),...i},e.key))]})},a=()=>{let{addMessage:e}=(0,s.useContext)(r),t=(t,i)=>{e({message:t,...i,key:new Date().getTime()})};return{show:t,info(e){t(e,{severity:"info"})},success(e){t(e,{severity:"success"})},warning(e){t(e,{severity:"warning"})},error(e){t(e,{severity:"error"})}}}},97678:function(e,t,i){"use strict";i.r(t);var n=i(57437);i(62759),i(57881);var s=i(74741),o=i(35551),r=i(39227),l=i(90858),a=i(43226),d=i(28757),c=i(14643),u=i(61396),h=i.n(u),x=i(2265),v=i(81835),p=i(52653),g=i(46986),f=i(94758),m=i(82749),j=i(27392),b=i(41507),k=i(93046),w=i(71971);t.default=e=>{let[t,i]=(0,x.useState)(e.type||""),[u,y]=(0,x.useState)(e.data||[]),{data:Z}=(0,m.useSession)(),C=(0,j.pm)(),I=(0,k.I0)();(0,x.useEffect)(()=>{(null==Z?void 0:Z.user)&&(b.Z.connect()||b.Z.connect(),b.Z.emit("join",{userID:Z.user._id,socketId:b.Z.id}),b.Z.on("online-users-updated",e=>{I((0,w.cx)(e))}))},[null==Z?void 0:Z.user]);let S={dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,nextArrow:(0,n.jsx)(e=>(0,n.jsx)(o.Z,{variant:"outlined",onClick:e.onClick,sx:{position:"absolute",zIndex:2,top:"21%",right:20,minWidth:30,width:35,height:25,color:"white",background:"black"},children:(0,n.jsx)(c.Z,{})}),{}),prevArrow:(0,n.jsx)(e=>(0,n.jsx)(o.Z,{variant:"outlined",onClick:e.onClick,sx:{position:"absolute",zIndex:2,top:"21%",left:13,minWidth:30,width:35,height:25,color:"white",background:"black"},children:(0,n.jsx)(d.Z,{})}),{})},_=e=>{let{label:t,isActive:i,onClick:s}=e;return(0,n.jsx)(o.Z,{style:{background:i?"black":"white",color:i?"white":"black"},onClick:s,children:t})},D=async e=>{let{type:t}=e,i=await (0,v.w)({url:"".concat("http://160.25.81.159:8000/api/v1","/songs/top/").concat(t),method:"GET"});(null==i?void 0:i.data)&&y(null==i?void 0:i.data)},T=async e=>{let{song:t}=e;try{let e=await (0,v.w)({url:"".concat("http://160.25.81.159:8000/api/v1","/playlists"),method:"POST",headers:{Authorization:"Bearer ".concat(null==Z?void 0:Z.user.access_token)},body:{songID:t}});(null==e?void 0:e.message)&&C.success(null==e?void 0:e.message)}catch(e){console.log(e)}};return(0,n.jsxs)(r.Z,{sx:{width:"80%",height:"400px",maxWidth:"800px",overflow:"hidden",divClass:{padding:"5px"},img:{width:"180px",height:"180px",borderRadius:"10px"},".title":{display:"flex",gap:2,Button:{height:"35px",marginTop:"20px"}}},children:[(0,n.jsxs)("div",{className:"title",children:[(0,n.jsx)("h2",{children:"Trending"}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_,{label:"tuần",isActive:"week"===t,onClick:()=>{i("week"),D({type:"week"})}}),(0,n.jsx)(_,{label:"th\xe1ng",isActive:"month"===t,onClick:()=>{i("month"),D({type:"month"})}})]})]}),(0,n.jsx)(s.Z,{...S,children:u.map(e=>(0,n.jsxs)("div",{className:"divClass",children:[(0,n.jsxs)(r.Z,{sx:{position:"relative",display:"inline-block"},children:[(0,n.jsx)(h(),{href:"/track/".concat(e._id,"?audio=").concat(e.audio,"&id=").concat(e._id),children:(0,n.jsx)("img",{src:"".concat("http://160.25.81.159:8000","/image/song/").concat(e.cover),alt:""})}),(null==e?void 0:e.isVip)&&(0,n.jsx)(l.Z,{title:"b\xe0i h\xe1t n\xe0y thuộc b\xe0i h\xe1t VIP",children:(0,n.jsx)(p.Z,{sx:{position:"absolute",top:8,left:8,background:"rgba(255, 255, 255, 0.7)","&:hover":{background:"white"}},size:"small",children:"VIP"})}),(0,n.jsx)(l.Z,{title:"Y\xeau th\xedch",children:(0,n.jsx)(p.Z,{sx:{position:"absolute",bottom:8,left:8,background:"rgba(255, 255, 255, 0.7)","&:hover":{background:"white"}},size:"small",children:(0,n.jsx)(g.default,{fontSize:"small"})})}),(0,n.jsx)(l.Z,{title:"Th\xeam v\xe0o danh s\xe1ch ph\xe1t",children:(0,n.jsx)(p.Z,{sx:{position:"absolute",bottom:8,right:8,background:"rgba(255, 255, 255, 0.7)","&:hover":{background:"white"}},size:"small",children:(0,n.jsx)(f.Z,{fontSize:"small",onClick:()=>T({song:e._id})})})})]}),(0,n.jsx)(a.Z,{sx:{display:{"> a":{color:"unset",textDecoration:"unset",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold",cursor:"pointer"}}},children:(0,n.jsx)(h(),{href:"/track/".concat(e._id,"?audio=").concat(e.audio,"&id=").concat(e._id),children:e.name})}),(0,n.jsx)(r.Z,{sx:{a:{textDecoration:"unset",color:"unset"}},children:e.users.map(e=>(0,n.jsxs)(h(),{href:"/detail/".concat(e._id),children:[e.name," "]},e._id))})]},e._id))})]})}},71971:function(e,t,i){"use strict";i.d(t,{cx:function(){return l},pw:function(){return o}});var n=i(39730);let s=(0,n.oM)({name:"user",initialState:{currentUserData:null,currentUserId:"",onlineUsers:[]},reducers:{SetCurrentUser:(e,t)=>{e.currentUserData=t.payload},SetCurrentUserId:(e,t)=>{e.currentUserId=t.payload},SetOnlineUsers:(e,t)=>{e.onlineUsers=t.payload}}}),{SetCurrentUser:o,SetCurrentUserId:r,SetOnlineUsers:l}=s.actions;t.ZP=s},42874:function(e,t,i){"use strict";i.r(t);var n=i(57437),s=i(39227),o=i(35551),r=i(43226),l=i(2265);let a={"Vip 1":"Nghe được b\xe0i h\xe1t vip, tạo group user tối đa 5 user","Vip 2":"Nghe được b\xe0i h\xe1t vip, tạo group user tối đa 10 user","Vip 3":"Nghe được b\xe0i h\xe1t vip, tạo group user tối đa 20 user"};t.default=()=>{let[e,t]=(0,l.useState)("Vip 1");return(0,n.jsxs)(s.Z,{sx:{mt:3},children:[(0,n.jsx)(s.Z,{sx:{display:{xs:"none",md:"flex"},gap:2},children:["Vip 1","Vip 2","Vip 3"].map(i=>(0,n.jsx)(o.Z,{onClick:()=>t(i),variant:e===i?"contained":"outlined",sx:{color:e===i?"white":"black",backgroundColor:e===i?"black":"white",borderColor:"black",borderRadius:"5px",height:"50px",width:"80px",textTransform:"none",fontWeight:600},children:i},i))}),(0,n.jsxs)(r.Z,{variant:"body1",sx:{padding:5,mt:5,height:"200px",border:"2px dashed",borderRadius:"10px"},children:[a[e],(0,n.jsx)(o.Z,{children:"Mua"})]})]})}},41507:function(e,t,i){"use strict";let{io:n}=i(60348),s=n("http://localhost:8000",{autoConnect:!1,withCredentials:!0});t.Z=s},81835:function(e,t,i){"use strict";i.d(t,{w:function(){return n}});let n=async e=>{let{url:t,method:i,body:n,useCredentials:s=!1,headers:o={},nextOption:r={}}=e,l={method:i,headers:new Headers({"content-type":"application/json",...o}),body:n?JSON.stringify(n):null,...r};return s&&(l.credentials="include"),fetch(t,l).then(e=>e.ok?e.json():e.json().then(function(t){var i,n;return{statusCode:e.status,message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"",error:null!==(n=null==t?void 0:t.error)&&void 0!==n?n:""}}))}}},function(e){e.O(0,[0,52,256,709,139,690,61,305,858,342,870,262,901,76,971,596,744],function(){return e(e.s=9301)}),_N_E=e.O()}]);