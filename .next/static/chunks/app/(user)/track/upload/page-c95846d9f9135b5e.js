(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{67088:function(e,t,n){Promise.resolve().then(n.t.bind(n,78139,23)),Promise.resolve().then(n.bind(n,26317))},24197:function(e,t,n){"use strict";n.d(t,{F:function(){return l}});var s=n(57437),a=n(53975),r=n(49804),i=n(2265);let l=e=>{let{message:t,onExited:n,autoHideDuration:l,...o}=e,[d,c]=i.useState(!0);return(0,s.jsx)(a.Z,{open:d,onClose:(e,t)=>{"clickaway"!==t&&c(!1)},TransitionProps:{onExited:n},anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:null!=l?l:3e3,...o,children:(0,s.jsx)(r.Z,{severity:t.severity,children:t.message})},t.key)}},27392:function(e,t,n){"use strict";n.d(t,{pm:function(){return s.useToast}}),n(24197);var s=n(73534)},73534:function(e,t,n){"use strict";n.r(t),n.d(t,{ToastContext:function(){return i},ToastProvider:function(){return l},useToast:function(){return o}});var s=n(57437),a=n(2265),r=n(24197);let i=(0,a.createContext)(null),l=e=>{let{children:t,...n}=e,[l,o]=(0,a.useState)([]),d=e=>o(t=>t.filter(t=>t.key!==e));return(0,s.jsxs)(i.Provider,{value:{addMessage(e){o(t=>[...t,e])}},children:[t,l.map(e=>(0,s.jsx)(r.F,{message:e,onExited:()=>d(e.key),...n},e.key))]})},o=()=>{let{addMessage:e}=(0,a.useContext)(i),t=(t,n)=>{e({message:t,...n,key:new Date().getTime()})};return{show:t,info(e){t(e,{severity:"info"})},success(e){t(e,{severity:"success"})},warning(e){t(e,{severity:"warning"})},error(e){t(e,{severity:"error"})}}}},26317:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var s=n(57437),a=n(39227),r=n(19643),i=n(92277),l=n(2265),o=n(96673);n(13111);var d=n(35843),c=n(35551),u=n(83686),h=n(82749),x=n(29222);let p=(0,d.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function v(){return(0,s.jsxs)(c.Z,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:(0,s.jsx)(u.Z,{}),sx:{background:"black"},onClick:e=>e.preventDefault(),children:["Upload files",(0,s.jsx)(p,{type:"file",onChange:e=>console.log(e.target.files),multiple:!0})]})}var f=e=>{let{setTab:t,setSongUpload:n,songUpload:a,setPercent:r}=e,{data:i}=(0,h.useSession)(),d=(0,l.useCallback)(async e=>{if(e&&e[0])try{var s,l;let o=new FormData;o.append("file",e[0]);let d=await x.Z.post("".concat("http://160.25.81.159:8000/api/v1","/files/upload/audio"),o,{headers:{Authorization:"Bearer ".concat(null==i?void 0:i.user.access_token),"Content-Type":"multipart/form-data",folder_type:"song",type:"audio"},onUploadProgress:e=>{let t=Math.round(100*e.loaded/(e.total||1));r(t)}}),c=null==d?void 0:null===(l=d.data)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.fileName;n({...a,audio:c}),t(1)}catch(e){console.log(e)}},[i]),{acceptedFiles:c,getRootProps:u,getInputProps:p}=(0,o.uI)({onDrop:d}),f=c.map(e=>(0,s.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path));return(0,s.jsxs)("section",{className:"container",children:[(0,s.jsxs)("div",{...u({className:"dropzone"}),children:[(0,s.jsx)("input",{...p()}),(0,s.jsx)(v,{}),(0,s.jsx)("p",{children:"K\xe9o thả hoặc chọn upload file....."})]}),(0,s.jsxs)("aside",{children:[(0,s.jsx)("h4",{children:"Files"}),(0,s.jsx)("ul",{children:f})]})]})},g=n(43226),j=n(21975),m=n(84081),b=n(50819),y=n(54997),Z=n(12339),w=n(2582),k=n(40182),C=n(27760),T=n(40471),S=n(81835),P=n(33533),_=n(27392);let N=(0,d.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function I(e){let{songUpload:t,setSongUpload:n}=e,{data:a}=(0,h.useSession)();return(0,s.jsxs)(c.Z,{component:"label",variant:"contained",sx:{background:"black"},startIcon:(0,s.jsx)(u.Z,{}),children:["Upload ảnh b\xeca",(0,s.jsx)(N,{type:"file",accept:"image/*",onChange:async e=>{var s,r,i;let l=e.target,o=null===(s=l.files)||void 0===s?void 0:s[0];if(o)try{let e=new FormData;e.append("file",o);let s=await x.Z.post("".concat("http://160.25.81.159:8000/api/v1","/files/upload/image"),e,{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.user.access_token),"Content-Type":"multipart/form-data",folder_type:"song",type:"image"}});n({...t,cover:null==s?void 0:null===(i=s.data)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.fileName})}catch(e){console.log(e)}}})]})}function U(e){return(0,s.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(a.Z,{sx:{width:"100%",mr:1},children:(0,s.jsx)(T.Z,{variant:"determinate",...e})}),(0,s.jsx)(a.Z,{sx:{minWidth:35},children:(0,s.jsx)(g.Z,{variant:"body2",sx:{color:"text.secondary"},children:"".concat(Math.round(e.value),"%")})})]})}let z=e=>{let{value:t}=e;return(0,s.jsx)(U,{value:t})};var R=e=>{var t,n;let{songUpload:r,percent:i,setSongUpload:o,setTab:d}=e,[u,x]=(0,l.useState)(!1),p=(0,_.pm)(),{data:v}=(0,h.useSession)(),f=async()=>{let e=await (0,S.w)({url:"".concat("http://160.25.81.159:8000/api/v1","/songs"),method:"POST",headers:{Authorization:"Bearer ".concat(null==v?void 0:v.user.access_token)},body:{name:r.name,audio:r.audio,cover:r.cover,users:r.users,genres:r.genres,isVip:u,state:"confirm"}});(null==e?void 0:e.statusCode)===201?(p.success(null==e?void 0:e.message),await new Promise(e=>setTimeout(e,3e3)),d(0)):p.error(null==e?void 0:e.message)};return(0,s.jsxs)(a.Z,{sx:{border:"2px dashed",padding:10,borderRadius:2},children:[(0,s.jsx)(g.Z,{variant:"h6",children:r.audio}),(0,s.jsx)(z,{value:i}),(0,s.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,s.jsxs)(a.Z,{sx:{flex:4,pr:2},children:[(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"".concat("http://160.25.81.159:8000","/image/song/").concat(r.cover),alt:"ảnh b\xeca cho b\xe0i h\xe1t",style:{width:250,height:250,borderRadius:6}})}),(0,s.jsx)(I,{songUpload:r,setSongUpload:o})]}),(0,s.jsxs)(a.Z,{sx:{flex:6,pl:2},children:[(0,s.jsx)(j.Z,{label:"T\xean b\xe0i h\xe1t",variant:"outlined",fullWidth:!0,value:r.name,onChange:e=>o(t=>({...t,name:e.target.value})),sx:{mb:2}}),(0,s.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:2},children:null==r?void 0:null===(t=r.users)||void 0===t?void 0:t.map((e,t)=>(0,s.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",borderRadius:2,px:1,py:.5,background:"black",color:"white",mb:2},children:[(0,s.jsx)(g.Z,{variant:"body2",sx:{mr:1},children:e}),(0,s.jsx)(P.Z,{fontSize:"small",sx:{cursor:"pointer",color:"#888"},onClick:()=>{let e=r.users.filter((e,n)=>n!==t);o(t=>({...t,users:e}))}})]},t))}),(0,s.jsxs)(m.Z,{fullWidth:!0,sx:{mb:2},children:[(0,s.jsx)(b.Z,{children:"T\xe1c giả"}),(0,s.jsx)(y.Z,{value:r.users,label:"T\xe1c giả",onChange:e=>{o(t=>({...t,users:[...t.users,e.target.value]}))},children:["686e76717c55361f30426d66","Mỹ T\xe2m","Đen V\xe2u","Noo Phước Thịnh"].map((e,t)=>(0,s.jsx)(Z.Z,{value:e,children:e},t))})]}),(0,s.jsx)(a.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:2},children:null==r?void 0:null===(n=r.genres)||void 0===n?void 0:n.map((e,t)=>(0,s.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",borderRadius:2,px:1,py:.5,background:"black",color:"white",mb:2},children:[(0,s.jsx)(g.Z,{variant:"body2",sx:{mr:1},children:e}),(0,s.jsx)(P.Z,{fontSize:"small",sx:{cursor:"pointer",color:"#888"},onClick:()=>{let e=r.genres.filter((e,n)=>n!==t);o(t=>({...t,genres:e}))}})]},t))}),(0,s.jsxs)(m.Z,{fullWidth:!0,children:[(0,s.jsx)(b.Z,{children:"Thể loại"}),(0,s.jsx)(y.Z,{value:r.genres,label:"Thể loại",onChange:e=>{o(t=>({...t,genres:[...t.genres,e.target.value]}))},children:["Nhạc trẻ","Rock","Ballad","Rap","EDM"].map((e,t)=>(0,s.jsx)(Z.Z,{value:e,children:e},t))})]}),(0,s.jsx)(w.Z,{children:(0,s.jsx)(k.Z,{control:(0,s.jsx)(C.Z,{checked:u,onChange:()=>x(!u),inputProps:{"aria-label":"controlled"}}),label:"VIP"})}),(0,s.jsx)(c.Z,{sx:{width:"160px",background:"black",color:"white",borderRadius:2,mt:7},onClick:()=>f(),children:"Lưu"})]})]})]})};function D(e){let{children:t,value:n,index:r,...i}=e;return(0,s.jsx)("div",{role:"tabpanel",hidden:n!==r,...i,children:n===r&&(0,s.jsx)(a.Z,{sx:{pt:3},children:t})})}function W(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}var B=()=>{let[e,t]=(0,l.useState)(0),[n,o]=(0,l.useState)(0),[d,c]=(0,l.useState)({name:"",audio:"",cover:"",users:[],genres:[],state:"confirm"});return(0,s.jsxs)(a.Z,{children:[(0,s.jsxs)(r.Z,{value:e,onChange:(e,n)=>t(n),textColor:"inherit",TabIndicatorProps:{style:{backgroundColor:"white",border:"2px dashed",borderRadius:5}},children:[(0,s.jsx)(i.Z,{label:"B\xe0i h\xe1t",...W(0),disabled:0!==e}),(0,s.jsx)(i.Z,{label:"Th\xf4ng tin chi tiết",...W(1),disabled:1!==e})]}),(0,s.jsx)(D,{value:e,index:0,children:(0,s.jsx)(f,{setTab:t,songUpload:d,setSongUpload:c,setPercent:o})}),(0,s.jsx)(D,{value:e,index:1,children:(0,s.jsx)(R,{percent:n,songUpload:d,setSongUpload:c,setTab:t})})]})}},81835:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});let s=async e=>{let{url:t,method:n,body:s,useCredentials:a=!1,headers:r={},nextOption:i={}}=e,l={method:n,headers:new Headers({"content-type":"application/json",...r}),body:s?JSON.stringify(s):null,...i};return a&&(l.credentials="include"),fetch(t,l).then(e=>e.ok?e.json():e.json().then(function(t){var n,s;return{statusCode:e.status,message:null!==(n=null==t?void 0:t.message)&&void 0!==n?n:"",error:null!==(s=null==t?void 0:t.error)&&void 0!==s?s:""}}))}},13111:function(){}},function(e){e.O(0,[0,52,256,709,139,305,975,342,870,489,915,916,971,596,744],function(){return e(e.s=67088)}),_N_E=e.O()}]);